# 图片水印工具

## 项目简介
这是一个基于 Python 和 PyQt5 的本地图片水印工具，支持批量导入图片、调整图片格式、添加前缀/后缀命名规则，并导出为 JPEG 或 PNG 格式。

## 项目要求

### **文件处理**

#### 1.1导入图片

支持单张图片拖拽或通过文件选择器导入。

支持批量导入，可一次性选择多张图片或直接导入整个文件夹。

在界面上显示已导入图片的列表（缩略图和文件名）。

#### 1.2支持格式

输入格式：必须支持主流格式，如 JPEG, PNG。强烈建议支持 BMP, TIFF。PNG格式必须支持透明通道。

输出格式：用户可选择输出为 JPEG 或 PNG。

#### 1.3导出图片

用户可指定一个输出文件夹。为防止覆盖原图，默认禁止导出到原文件夹。

提供导出文件命名规则选项：

​	保留原文件名。

​	添加自定义前缀（如 wm_）。

​	添加自定义后缀（如 _watermarked）。

对于 JPEG 格式，提供图片质量（压缩率）调节滑块（0-100）。（可选高级功能）

导出时允许用户调整图片尺寸（如按宽度、高度或百分比缩放）。（可选高级功能）



### **水印类型**

#### 2.1文本水印

内容：用户可自定义输入任意文本。

字体：可选择系统已安装的字体、字号、粗体、斜体。（可选高级功能）

颜色：提供调色板让用户选择字体颜色。（可选高级功能）

透明度：可调节文本的透明度（0-100%）。

样式：可添加阴影或描边效果，以增强在复杂背景下的可读性。（可选高级功能）

#### 2.2图片水印（可选高级功能）

用户可从本地选择一张图片（如Logo）作为水印。

必须支持带透明通道的 PNG 图片。

缩放：可按比例或自由调整图片水印的大小。

透明度：可调节图片水印的整体透明度（0-100%）。



### 水印布局与样式

#### 3.1实时预览：

所有对水印的调整都应在主预览窗口中实时显示效果。用户可以点击图片列表切换预览不同的图片。

#### 3.2位置

​	预设位置：提供九宫格布局（四角、正中心），用户可一键将水印放置在这些位置。

​	手动拖拽：用户可以直接在预览图上通过鼠标拖拽水印到任意位置。

#### 3.3旋转：

提供一个滑块或输入框，允许用户以任意角度旋转水印。（可选高级功能）



### 配置管理

#### 4.1 水印模板：

用户可以将当前的水印设置（包括水印内容、字体、颜色、位置、大小、透明度等所有参数）保存为一个模板。

用户可以加载、管理和删除已保存的模板。

程序启动时可自动加载上一次关闭时的设置或一个默认模板。



## 功能特性
- 支持单张图片拖拽导入。
- 支持批量导入图片或整个文件夹。
- 支持主流图片格式（JPEG、PNG、BMP、TIFF），PNG 支持透明通道。
- 用户可选择输出格式（JPEG 或 PNG）。
- 支持自定义文件命名规则（前缀/后缀）。
- 支持调整 JPEG 图片质量。
- 支持缩略图预览。

## 环境依赖
- Python 3.6 或更高版本
- PyQt5
- Pillow

## 安装依赖
在终端或命令提示符中运行以下命令安装依赖：
```bash
pip install PyQt5 Pillow
```

## 运行程序
1. 确保项目文件结构如下：
   ```
   f:\研究生阶段\研一上\AI4SE-photowatermarker2\
   ├── main.py
   ├── ui_main.py
   ├── image_processor.py
   ├── README.md
   ```
2. 运行以下命令启动程序：
   ```bash
   python main.py
   ```

## 使用说明
1. **导入图片**：
   - 点击“导入图片”按钮选择单张或多张图片。
   - 点击“导入文件夹”按钮选择包含图片的文件夹。
   - 支持拖拽图片文件到程序窗口。

2. **设置导出选项**：
   - 选择输出格式（JPEG 或 PNG）。
   - 设置自定义前缀和后缀。
   - 调整 JPEG 压缩质量（仅在选择 JPEG 格式时生效）。

3. **导出图片**：
   - 点击“导出图片”按钮，选择目标文件夹。
   - 程序会将处理后的图片保存到目标文件夹。

## 打包为可执行文件
使用 PyInstaller 将程序打包为 Windows 可执行文件：
```bash
pip install pyinstaller
pyinstaller --noconsole main.py
```
打包完成后，生成的可执行文件位于 `dist` 文件夹中。

## 注意事项
- 如果需要忽略某些文件夹（如 `images_test` 或 `__pycache__`），请在 `.gitignore` 文件中添加相应规则。
- 如果遇到网络问题导致无法推送到 GitHub，请检查代理设置或使用 SSH 连接。

## 许可证
本项目遵循 MIT 许可证。
